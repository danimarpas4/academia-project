{% extends 'simulador/base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            
            <div class="card bg-dark text-white border-secondary shadow-lg">
                
                <div class="card-header border-secondary p-4" style="background: rgba(13, 110, 253, 0.2);">
                    <h2 class="h4 mb-0 fw-bold text-uppercase" style="letter-spacing: 2px;">
                        ‚öôÔ∏è Configuraci√≥n de Misi√≥n
                    </h2>
                </div>

                <div class="card-body p-4">
                    
                    <form method="POST" action="{% url 'configurar_test' %}">
                        {% csrf_token %}

                        <h5 class="text-warning mb-3 border-bottom border-secondary pb-2">1. Objetivo (Temario)</h5>
                        
                        <div class="form-check mb-3 p-3 rounded" style="background-color: #2c2c2c;">
                            <input class="form-check-input" type="checkbox" id="todos" onchange="toggle(this)">
                            <label class="form-check-label fw-bold text-white" for="todos">
                                üõ°Ô∏è SIMULACRO GENERAL (Seleccionar todo)
                            </label>
                        </div>

                        <div class="row g-2 mb-4" style="max-height: 300px; overflow-y: auto;">
                            {% for tema in temas %}
                            <div class="col-md-6">
                                <div class="form-check p-2 rounded h-100 d-flex align-items-center hover-effect" style="background-color: #1a1a1a; border: 1px solid #444;">
                                    <input class="form-check-input case ms-1 me-2 bg-dark border-secondary" type="checkbox" name="temas" value="{{ tema.id }}" id="t{{ tema.id }}">
                                    <label class="form-check-label w-100 cursor-pointer text-light" for="t{{ tema.id }}">
                                        {{ tema.nombre }}
                                    </label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>

                        <h5 class="text-warning mb-3 border-bottom border-secondary pb-2 mt-4">2. Par√°metros</h5>
                        
                        <div class="row g-4">
                            <div class="col-md-6">
                                <label class="form-label text-info">Munici√≥n (N¬∫ Preguntas)</label>
                                <select name="cantidad" class="form-select bg-dark text-white border-secondary">
                                    <option value="10">10 (R√°pido)</option>
                                    <option value="20" selected>20 (Est√°ndar)</option>
                                    <option value="50">50 (Simulacro)</option>
                                    <option value="100">100 (Examen Oficial)</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label text-info">Cron√≥metro</label>
                                <select name="tiempo" class="form-select bg-dark text-white border-secondary">
                                    <option value="0" selected>Sin l√≠mite</option>
                                    <option value="10">10 Minutos</option>
                                    <option value="20">20 Minutos</option>
                                    <option value="45">45 Minutos</option>
                                    <option value="90">1 Hora y media</option>
                                </select>
                            </div>
                        </div>

                        <div class="d-grid gap-2 mt-5">
                            <button type="submit" class="btn btn-warning btn-lg py-3 fw-bold text-dark text-uppercase shadow-sm hover-scale">
                                üöÄ Iniciar Maniobra
                            </button>
                        </div>

                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    function toggle(source) {
        checkboxes = document.getElementsByClassName('case');
        for(var i=0, n=checkboxes.length;i<n;i++) {
            checkboxes[i].checked = source.checked;
        }
    }
</script>

<style>
    /* Efectos extra para que parezca una app moderna */
    .hover-scale { transition: transform 0.2s; }
    .hover-scale:hover { transform: scale(1.02); box-shadow: 0 0 15px rgba(255, 193, 7, 0.4); }
    
    .hover-effect:hover { border-color: #0d6efd !important; background-color: #222 !important; }
    
    /* Scrollbar oscura personalizada */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #1a1a1a; }
    ::-webkit-scrollbar-thumb { background: #444; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #0d6efd; }
</style>
{% endblock %}